

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/con1.png">
  <link rel="icon" href="/img/con1.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="“无论最终结果将人类历史导向何处，我们决定选择希望”">
  <meta name="author" content="友人律 | Guilin Chang">
  <meta name="keywords" content="三差学生、不学无术">
  <meta name="description" content="1 MCDT多通道数据传送器，mult-channel data transmitter 迷你版的MCDF 1.1 MCDT测试平台结构 1.2 主要验证组件1.2.1 stimulatorstimulator激励发生器，是验证环境的重要部件，在一些场合中，它也被称为driver(驱动器)、BFM(bus function model , 总线功能模块)、behavioral(行为模型)或者gen">
<meta property="og:type" content="article">
<meta property="og:title" content="MCDT测试结构">
<meta property="og:url" content="http://yoursite.com/202111161414/IC/sv%E5%AD%A6%E4%B9%A0/%E5%AE%9E%E9%AA%8Cessay/ic/sv%E5%AD%A6%E4%B9%A0/MCDT%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84/index.html">
<meta property="og:site_name" content="友人律的博客">
<meta property="og:description" content="1 MCDT多通道数据传送器，mult-channel data transmitter 迷你版的MCDF 1.1 MCDT测试平台结构 1.2 主要验证组件1.2.1 stimulatorstimulator激励发生器，是验证环境的重要部件，在一些场合中，它也被称为driver(驱动器)、BFM(bus function model , 总线功能模块)、behavioral(行为模型)或者gen">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116141617844.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116141617844.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116172647941.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116173239063.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116173441139.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116182335043.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116183030785.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116192157072.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116192705880.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116193349393.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116201845632.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116201820105.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116202603263.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116202955592.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116203146373.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116203423848.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116203656979.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116204108341.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116210118259.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116211317271.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116211721080.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116211908782.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116212050647.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116212312316.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116212633341.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116213437000.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116224255876.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116225039863.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116225450808.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116225710606.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116230019374.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116230104837.png">
<meta property="og:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116230119510.png">
<meta property="article:published_time" content="2021-11-16T06:14:00.000Z">
<meta property="article:modified_time" content="2022-01-24T13:59:34.630Z">
<meta property="article:author" content="友人律 | Guilin Chang">
<meta property="article:tag" content="实验">
<meta property="article:tag" content="IC">
<meta property="article:tag" content="sv学习">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116141617844.png">
  
  <title>MCDT测试结构 - 友人律的博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/stackoverflow-dark.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":true,"offset_factor":2},"web_analytics":{"enable":true,"baidu":"eca4a4d34dadf0d4e282cc6ef2dc3de6","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body><!-- hexo injector body_begin start -->
<link defer rel="stylesheet" href="/css/article_para.css" />
<div id="web_bg"></div><!-- hexo injector body_begin end -->
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>友人律的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E9%80%9A%E7%9F%A5/">
                <i class="iconfont icon-link-fill"></i>
                通知
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E9%A1%B9%E7%9B%AE%E4%B8%8E%E8%AE%BE%E8%AE%A1/">
                <i class="iconfont icon-link-fill"></i>
                项目与设计
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">
                <i class="iconfont icon-link-fill"></i>
                开发工具
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/CS/">
                <i class="iconfont icon-link-fill"></i>
                CS
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/IC/">
                <i class="iconfont icon-link-fill"></i>
                IC
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/背景页.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="MCDT测试结构">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-11-16 14:14" pubdate>
        2021年11月16日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      7.2k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      22 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MCDT测试结构</h1>
            
            <div class="markdown-body">
              <h1 id="1-MCDT"><a href="#1-MCDT" class="headerlink" title="1 MCDT"></a>1 MCDT</h1><p>多通道数据传送器，mult-channel data transmitter</p>
<p>迷你版的MCDF</p>
<h2 id="1-1-MCDT测试平台结构"><a href="#1-1-MCDT测试平台结构" class="headerlink" title="1.1 MCDT测试平台结构"></a>1.1 MCDT测试平台结构</h2><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116141617844.png" srcset="/img/loading.gif" lazyload alt="image-20211116141617844"></p>
<h2 id="1-2-主要验证组件"><a href="#1-2-主要验证组件" class="headerlink" title="1.2 主要验证组件"></a>1.2 主要验证组件</h2><h3 id="1-2-1-stimulator"><a href="#1-2-1-stimulator" class="headerlink" title="1.2.1 stimulator"></a>1.2.1 stimulator</h3><p>stimulator激励发生器，是验证环境的重要部件，在一些场合中，它也被称为driver(驱动器)、BFM(bus function model , 总线功能模块)、behavioral(行为模型)或者generator(发生器)</p>
<p>stimulator主要职责是模拟与DUT相邻设计的接口协议，只需要关注于如何模拟接口信号，使其能够以真实的接口协议来发送激励给DUT</p>
<p>stimulator不应违反协议，但布局属于真实的硬件行为，还可以给出更多丰富的只要协议允许的激励场景</p>
<p>从stimulator同DUT的连接关系来看，我们可以进一步分为两种：<strong>initiator(发生器)</strong>、<strong>responder(响应器)</strong></p>
<p> initiator是主动发出数据，responder被动接受响应</p>
<p>就我们要验证的MCDT来看，与下行通道从端(channel slave)的连接，这种stimulator属于initiator功能是主动发起接口数据传输</p>
<h3 id="1-2-2-monitor"><a href="#1-2-2-monitor" class="headerlink" title="1.2.2 monitor"></a>1.2.2 monitor</h3><p>Monitor(监测器)的主要功能是用来观察DUT的边界或者内部信号，并且经过打包整理传送给其他验证平台的组件，例如checker(比较器)</p>
<p>从监测信号的层次来划分monitor的功能，它们可以分为观察DUT边界信号和观察DUT内部信号：</p>
<ul>
<li>观察DUT边界信号。对于系统信号如时钟，可以监测其频率变化；对于总线信号，可以监测总线的传输类型和数据内容，以及检查总线时序是否符合协议</li>
<li>观察DUT内部信号。从<strong>灰盒验证</strong>的手段来看，往往需要探视DUT内部信号，用来指导stimulator的激励发送，或者完成覆盖率收集，又或者完成内部功能的检查</li>
</ul>
<h3 id="1-2-3-checker"><a href="#1-2-3-checker" class="headerlink" title="1.2.3 checker"></a>1.2.3 checker</h3><p><em>无论从实现难度和维护人力上讲，checker(比较器)都应该是最需要事件投入的验证组件</em></p>
<p>checker肩负了<strong>模拟设计行为</strong>和<strong>功能检查</strong>的任务</p>
<p>内部往往有缓存器，<strong>缓存</strong>从各个monitor收集到的数据</p>
<p>将DUT输入接口侧的数据汇集给内置的<strong>reference model</strong>(参考模型)。Reference model在这里扮演了模拟硬件功能的角色，也是需要较多精力维护的部分，因为验证者需要在熟悉硬件的功能的情况下实现该模型，而又不应参考真实硬件的逻辑</p>
<hr>
<p>通过数据比较的方法，检查实际收集到的DUT输出端接口数据是否同reference model产生的期望数据一致</p>
<p>对于设计内部的关键功能模块，也有相对应的线程进行独立的检查</p>
<p>在检查过程中，可以将检查成功的信息统一纳入到检查报告中，便于仿真后的追溯。如果检查失败，也可以采取暂停仿真同时报告错误信息的方式，进行在线调试</p>
<h2 id="3-理解验证环境结构的第三个要点"><a href="#3-理解验证环境结构的第三个要点" class="headerlink" title="3 理解验证环境结构的第三个要点"></a>3 理解验证环境结构的第三个要点</h2><h3 id="1-3-1-学会区分哪一部分属于硬件、哪一部分属于软件、哪一部分属于软硬件交互的部分"><a href="#1-3-1-学会区分哪一部分属于硬件、哪一部分属于软件、哪一部分属于软硬件交互的部分" class="headerlink" title="1.3.1 学会区分哪一部分属于硬件、哪一部分属于软件、哪一部分属于软硬件交互的部分"></a>1.3.1 学会区分哪一部分属于硬件、哪一部分属于软件、哪一部分属于软硬件交互的部分</h3><ul>
<li><p>硬件部分：代验设计mcdt</p>
</li>
<li><p>软件部分</p>
<ul>
<li>验证环境：激励发生器、检测器、比较器等</li>
<li>为什么上述是软件部分：由于它们都是类的实例构成</li>
</ul>
</li>
<li>软硬件交互部分<ul>
<li>接口interface</li>
<li>软硬件之间数据通信依赖于此接口</li>
</ul>
</li>
</ul>
<h3 id="1-3-2-弄清楚验证环境中各个验证组件之间的位置层次关系以及它们之间是否有数据通信"><a href="#1-3-2-弄清楚验证环境中各个验证组件之间的位置层次关系以及它们之间是否有数据通信" class="headerlink" title="1.3.2 弄清楚验证环境中各个验证组件之间的位置层次关系以及它们之间是否有数据通信"></a>1.3.2 弄清楚验证环境中各个验证组件之间的位置层次关系以及它们之间是否有数据通信</h3><p>例如：我们对mcdt的数据通道发送数据，必须通过channel_interface，而驱动channel_interface的组件时<strong>channel_initiator</strong></p>
<p>channel_initiator，它从channel_generator获得需要发送的<strong>随机数据</strong>，而这些数据内容按照我们之前了解的接口时序协议驱动到接口上面</p>
<p>而channel_generator与channel_initiator之间存在数据通信关系，前者创建随机数据事务<strong>transcation</strong>实例，并发送到initiator，这种通信关系利用到之前学的sv通信要素<strong>mailbox</strong></p>
<p>channel_monitor与MCDT_monitor需要在各自接口上检测到MCDT的接口数据，并且写入到transcation实例中，发送到checker</p>
<p>最后checker将输入和输出数据做数据检查，从monitor到checker的数据通信也是基于事物的，也是mailbox实现</p>
<p>可以从这种验证组件之间的通信关系，验证组建之间的通信都是基于<strong>事务级</strong>的传送，而验证组件和硬件端口之间的通信必须以来接口，通过硬件时序才能实现</p>
<h3 id="1-3-3-能够理解情节，仿真时如何开始运转，各个验证组件如何展开工作，而最后仿真又是结束的"><a href="#1-3-3-能够理解情节，仿真时如何开始运转，各个验证组件如何展开工作，而最后仿真又是结束的" class="headerlink" title="1.3.3 能够理解情节，仿真时如何开始运转，各个验证组件如何展开工作，而最后仿真又是结束的"></a>1.3.3 能够理解情节，仿真时如何开始运转，各个验证组件如何展开工作，而最后仿真又是结束的</h3><p>也可将这一要点理解为，验证如何展开运行</p>
<p>在接下来各个核心验证组件，和环境集成的代码中，我们理解到，每一个验证组件他们的单一职责是什么，各个验证组件如何运转的，仿真是如何开始如何结束的</p>
<hr>
<p>channel_initiator与channel_monitor一一对应</p>
<p>initiator与monitor被封装在agent中</p>
<p>由于arbiter不需要握手，因此只外置了mcdt monitor而不需要mcdt responder，即不需要任何数据反馈</p>
<p>两种类型的Monitor都将检测到的数据写入transcation实例并发送到mcdt_checker</p>
<p>mcdt_checker内置若开FIFO，接受从MCDT的输入端和输出端检测到的数据</p>
<p>由于checker输入和输出端FIFO中存储的数据类型一致，这也给做数据比较带来了方便</p>
<h1 id="2-实现stiumlator"><a href="#2-实现stiumlator" class="headerlink" title="2 实现stiumlator"></a>2 实现stiumlator</h1><h2 id="2-1-目前实现结构图"><a href="#2-1-目前实现结构图" class="headerlink" title="2.1 目前实现结构图"></a>2.1 目前实现结构图</h2><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116141617844.png" srcset="/img/loading.gif" lazyload alt="目前实现结构图"></p>
<p>还没实现，所以一片空白</p>
<h2 id="2-2-如何实现channel-generator-channel-initiator"><a href="#2-2-如何实现channel-generator-channel-initiator" class="headerlink" title="2.2 如何实现channel_generator,channel_initiator"></a>2.2 如何实现channel_generator,channel_initiator</h2><p>generator：产生数据</p>
<p>initiator：将这些数据解析并驱动到interface的驱动组件</p>
<p>transcation:用来定义一个抽象数据的数据包内容</p>
<h2 id="2-3-channel-transcation"><a href="#2-3-channel-transcation" class="headerlink" title="2.3 channel_transcation"></a>2.3 channel_transcation</h2><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116172647941.png" srcset="/img/loading.gif" lazyload alt="image-20211116172647941"></p>
<p>数据成员有若干个<code>rand</code>形变量</p>
<p>并针对数据成员声明了有效的数据约束，用来对单个随机变量或多个随机变量之间加以约束</p>
<figure class="highlight avrasm"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs avrasm"><span class="hljs-symbol">data:</span>容纳一个数据包所有数据的动态数组data<br><span class="hljs-symbol">ch_id:</span>channel_id表示数据源<br><span class="hljs-symbol">pkg_id:</span>package_id表示数据所在数据包的packageid<br><span class="hljs-symbol">data_nidel:</span>控制数据包内相邻数据间隔周期的<br><span class="hljs-symbol">pkg_nidel:</span>相邻数据包间隔周期<br><span class="hljs-symbol">rsp:</span>用来表示反馈的(非随机)<br><span class="hljs-symbol">obj_id:</span>当前实例id(非随机)<br></code></pre></div></td></tr></table></figure>
<hr>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116173239063.png" srcset="/img/loading.gif" lazyload alt="image-20211116173239063"></p>
<figure class="highlight avrasm"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs avrasm"><span class="hljs-symbol">new:</span>构造函数<br><span class="hljs-symbol">clone:</span>当前实例克隆，包括两个操作：①创建新的实例②当前示例的数据成员拷贝到新实例对应成员，最后返回句柄<br></code></pre></div></td></tr></table></figure>
<h2 id="2-4-channel-initiator"><a href="#2-4-channel-initiator" class="headerlink" title="2.4 channel_initiator"></a>2.4 channel_initiator</h2><h3 id="2-4-1-定义"><a href="#2-4-1-定义" class="headerlink" title="2.4.1 定义"></a>2.4.1 定义</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116173441139.png" srcset="/img/loading.gif" lazyload alt="image-20211116173441139"></p>
<p>从channel_generator获取，channel_transcation数据，并且将其中的数据驱动到接口interface上</p>
<p>成员变量包括：</p>
<figure class="highlight applescript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs applescript"><span class="hljs-built_in">name</span><br>虚接口:channel_interfadce<br>与channel_generator做数据通信的两个mailbox句柄,request_mailbox,response_maibox<br></code></pre></div></td></tr></table></figure>
<p>成员方法</p>
<figure class="highlight ceylon"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ceylon">chnl<span class="hljs-number">_</span>initiator的<span class="hljs-keyword">new</span>函数中，它将参数赋值给了成员变量<br>set<span class="hljs-number">_</span><span class="hljs-keyword">interface</span>函数作用是为了从外部获得接口指针，并赋值于自己的虚接口成员变量，在类似句柄或者虚接口赋值过程中经常会做句柄或虚接口是否为空的判断，以免发生空句柄赋值<br></code></pre></div></td></tr></table></figure>
<h3 id="2-4-2-任务：run运行任务"><a href="#2-4-2-任务：run运行任务" class="headerlink" title="2.4.2 任务：run运行任务"></a>2.4.2 任务：run运行任务</h3><p>chnl_initiator的run是个task任务</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116182335043.png" srcset="/img/loading.gif" lazyload alt="image-20211116182335043"></p>
<p>它表示，该组件在验证环境开始时的职责就是调用driver任务，在接口上做数据驱动激励，在driver任务中他会等待系统复位信号释放后，利用forever循环语句不断地从request_mailbox中获取激励数据，并且将其通过chnl_write方法写出到接口上面，待发送完毕之后，还要克隆request数据再将其数据成员response值为1</p>
<p>并且将反馈数据respose句柄通过resposen_mailbox写回到generator，如此完成了initiator和generator之间的<strong>事务数据握手</strong></p>
<p>需要注意：Initiator或许和返回数据的两个句柄requestmb,respnosemb并没有在initiator中例化，而是在稍后的generator中例化的</p>
<h3 id="2-4-3-任务：chnl-write，chnl-idle"><a href="#2-4-3-任务：chnl-write，chnl-idle" class="headerlink" title="2.4.3  任务：chnl_write，chnl_idle"></a>2.4.3  任务：chnl_write，chnl_idle</h3><ul>
<li>chnl_write数据驱动</li>
<li>chnl_idle数据复位</li>
</ul>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116183030785.png" srcset="/img/loading.gif" lazyload alt="image-20211116183030785"></p>
<p>chnl_write ：</p>
<ul>
<li>从chnl_transcation对象中抽取动态数据data中的每一个子成员</li>
<li>在时钟上升沿，将其与valid信号一同置为有效发送到接口上面，且按照协议要求只在ch_ready为高时认为此次数据发送完好处呢</li>
<li>在相邻数据之间插入若干空闲周期</li>
</ul>
<p>chnl_idle：</p>
<ul>
<li>在时钟上升沿，将接口中的valid与data同时置为零</li>
</ul>
<h3 id="2-4-4-为什么没有channel-transcation没有体现在结构图中"><a href="#2-4-4-为什么没有channel-transcation没有体现在结构图中" class="headerlink" title="2.4.4  为什么没有channel_transcation没有体现在结构图中"></a>2.4.4  为什么没有channel_transcation没有体现在结构图中</h3><p>为什么没有channel_transcation没有体现在结构图中，是因为它作为chnl_init与chnl_gen之间通信的数据事务，并非验证结构中的成员</p>
<h2 id="2-5-channel-generator"><a href="#2-5-channel-generator" class="headerlink" title="2.5 channel_generator"></a>2.5 channel_generator</h2><h3 id="2-5-1-定义"><a href="#2-5-1-定义" class="headerlink" title="2.5.1 定义"></a>2.5.1 定义</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116192157072.png" srcset="/img/loading.gif" lazyload alt="image-20211116192157072"></p>
<p>与trans相似的是都有rand变量与相应约束</p>
<figure class="highlight haxe"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs haxe"><span class="hljs-keyword">new</span><span class="hljs-type"></span>函数例化两个信箱<br></code></pre></div></td></tr></table></figure>
<h3 id="2-5-2-任务：run运行任务"><a href="#2-5-2-任务：run运行任务" class="headerlink" title="2.5.2 任务：run运行任务"></a>2.5.2 任务：run运行任务</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116192705880.png" srcset="/img/loading.gif" lazyload alt="image-20211116192705880"></p>
<ul>
<li>调用了多次创建数据事务，并且发送个chnl_init的任务</li>
<li>发送完之后，调用用来控制仿真结束的旗语<code>run_stop_flags.put</code>,返回了一把钥匙</li>
</ul>
<h3 id="2-5-3-任务：send-trans"><a href="#2-5-3-任务：send-trans" class="headerlink" title="2.5.3 任务：send_trans"></a>2.5.3 任务：send_trans</h3><ul>
<li>chnl_init先创建了事务实例request，并调用randomize函数王城随机化</li>
<li>将随机化的实例request放到rsq_mb中，这个放入的句柄稍后被initor取出</li>
<li>同时genor从rsp_mb中等待initor返回的response事务</li>
</ul>
<p><strong>利用这两个组件完成initor与genor的一次握手</strong></p>
<p>如何理解：genor的约束变量与创建并随机化的实例rsq做的组合，进而将约束完成层次化的控制传递</p>
<h2 id="2-6-chnl-initiator与chnl-generator"><a href="#2-6-chnl-initiator与chnl-generator" class="headerlink" title="2.6 chnl_initiator与chnl_generator"></a>2.6 chnl_initiator与chnl_generator</h2><p>chnl_initor与chnl_gen or通过mailbox连接，在最后一张环境集成中讲解</p>
<h1 id="3-实现monitor与checker"><a href="#3-实现monitor与checker" class="headerlink" title="3 实现monitor与checker"></a>3 实现monitor与checker</h1><h2 id="3-1-目前实现结构图"><a href="#3-1-目前实现结构图" class="headerlink" title="3.1 目前实现结构图"></a>3.1 目前实现结构图</h2><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116193349393.png" srcset="/img/loading.gif" lazyload alt="目前实现结构图"></p>
<h2 id="3-1-monitor"><a href="#3-1-monitor" class="headerlink" title="3.1 monitor"></a>3.1 monitor</h2><p>两种检测器：</p>
<ul>
<li>channel_monitor依靠对应的channel_interface，从接口获取写入每个通道从端的数据，并打包整理写入到监测数据中</li>
<li>MCDT_monitor依靠另外接口，获取MCDT最终送出去的数据，也打包整理写入到监测数据中</li>
</ul>
<p>有时候monitor和stiumlator可以选择相同的trans，做数据解析或写入</p>
<p>实验中用自定义的结构体monitor_data用于存放检测到的数据，也被chnl_monitor和MCDT_monitor同时使用</p>
<h2 id="3-2-monitor-data"><a href="#3-2-monitor-data" class="headerlink" title="3.2 monitor data"></a>3.2 monitor data</h2><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116201845632.png" srcset="/img/loading.gif" lazyload alt="image-20211116201845632"></p>
<p>只定义两个成员，因为对于两个Monitor没有数据包的概念，每个数据之间不存在联系，因此用chnl_trans做监测数据的事务类型是不妥的</p>
<figure class="highlight haskell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">data</span>只是单数据而不是数组，不同于chnl_trans定义的动态数组</span><br><span class="hljs-title">id</span><br></code></pre></div></td></tr></table></figure>
<h2 id="3-3-channel-monitor"><a href="#3-3-channel-monitor" class="headerlink" title="3.3 channel_monitor"></a>3.3 channel_monitor</h2><h3 id="3-3-1-定义"><a href="#3-3-1-定义" class="headerlink" title="3.3.1 定义"></a>3.3.1 定义</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116201820105.png" srcset="/img/loading.gif" lazyload alt="image-20211116201820105"></p>
<figure class="highlight haxe"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs haxe">name变量，在<span class="hljs-keyword">new</span><span class="hljs-type"></span>中赋值，用于后期的数据打印的消息中标记每个chnl_monitor名字<br>chnl_intf，同chnl_initiator，由外部传入接口指针<br>mon_mb：用于发送检测到书的mailbox句柄，没有例化，利用句柄，最终写到了checker中的mailbox实例<br></code></pre></div></td></tr></table></figure>
<h3 id="3-3-2-任务run"><a href="#3-3-2-任务run" class="headerlink" title="3.3.2 任务run"></a>3.3.2 任务run</h3><p>chnl_monitor同initiator与generator，在验证环境运行时执行工作，所以也有任务run</p>
<p>用于不断地等待输出数据事件</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116202603263.png" srcset="/img/loading.gif" lazyload alt="image-20211116202603263"></p>
<p>用于判断什么时候的采集数据是有效的：时钟上升沿的同时，valid===1并且ready===1</p>
<p>注意三个等号，用来判断四值逻辑变量</p>
<p>chnl_data数据写入到监测数据中，并通过mon_mb写入到checker中的监测数据缓存里面</p>
<h2 id="3-4-MCDT-Monitor"><a href="#3-4-MCDT-Monitor" class="headerlink" title="3.4 MCDT Monitor"></a>3.4 MCDT Monitor</h2><h3 id="3-4-1-定义"><a href="#3-4-1-定义" class="headerlink" title="3.4.1 定义"></a>3.4.1 定义</h3><p>成员变量和方法与chnl_mon类似，只是传入的指针接口是<strong>mcdt_interface</strong>，因为该接口监控与驱动的数据内容不同于chnl_interface</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116202955592.png" srcset="/img/loading.gif" lazyload alt="image-20211116202955592"></p>
<h3 id="3-4-2-任务：mon-trans"><a href="#3-4-2-任务：mon-trans" class="headerlink" title="3.4.2 任务：mon_trans"></a>3.4.2 任务：mon_trans</h3><p>不断地等待有效的输出数据事件</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116203146373.png" srcset="/img/loading.gif" lazyload alt="image-20211116203146373"></p>
<p>由于MCDT的输出数据同时还包括id信息，所以需要将mcdt_data , mcdt_id都写入到检测数据中</p>
<h1 id="4-checker"><a href="#4-checker" class="headerlink" title="4 checker"></a>4 checker</h1><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116203423848.png" srcset="/img/loading.gif" lazyload alt="目前实现的结构"></p>
<h2 id="3-4-checker"><a href="#3-4-checker" class="headerlink" title="3.4 checker"></a>3.4 checker</h2><h3 id="3-4-1-定义-1"><a href="#3-4-1-定义-1" class="headerlink" title="3.4.1 定义"></a>3.4.1 定义</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116203656979.png" srcset="/img/loading.gif" lazyload alt="image-20211116203656979"></p>
<p>成员变量包括</p>
<figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">name</span><br><span class="hljs-attribute">error_count</span>：用于对错误比较技术<br><span class="hljs-attribute">cmp_count</span>：对所有比较技术<br><span class="hljs-attribute">in_mbs</span>[<span class="hljs-number">3</span>]：三个输入端监测数据的mailbox<br><span class="hljs-attribute">out_mb</span>：一个输出端检测数据的mailbox<br></code></pre></div></td></tr></table></figure>
<figure class="highlight haxe"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs haxe"><span class="hljs-keyword">new</span><span class="hljs-type"></span>中分别对name、error_count、cmp_count做初始化<br>例化了所有的mb实例<br></code></pre></div></td></tr></table></figure>
<h3 id="3-4-2-任务：run"><a href="#3-4-2-任务：run" class="headerlink" title="3.4.2 任务：run"></a>3.4.2 任务：run</h3><p>运行方法，调用单一的指责方法do_compare()</p>
<hr>
<h3 id="3-4-3-任务：do-compare"><a href="#3-4-3-任务：do-compare" class="headerlink" title="3.4.3 任务：do_compare"></a>3.4.3 任务：do_compare</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116204108341.png" srcset="/img/loading.gif" lazyload alt="image-20211116204108341"></p>
<p>是数据比较的核心</p>
<figure class="highlight applescript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs applescript">每次从输出端缓存mb中获取一个输出数据<br>凭借该输出数据ID判断从哪一个输入端缓存中获取数据<br>都获取数据之后进行比较<br>比较错误借助$<span class="hljs-keyword">error</span>打印错误信息,error_cnt计数<br>比较成功打印成功信息<br>无论成功失败每次比较给cmp_cnt计数<br></code></pre></div></td></tr></table></figure>
<h1 id="5-实现顶层环境和测试用例"><a href="#5-实现顶层环境和测试用例" class="headerlink" title="5 实现顶层环境和测试用例"></a>5 实现顶层环境和测试用例</h1><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116210118259.png" srcset="/img/loading.gif" lazyload alt="目前实现结构图"></p>
<h2 id="5-1-agent"><a href="#5-1-agent" class="headerlink" title="5.1 agent"></a>5.1 agent</h2><p>基本的验证单元，或者被称为<strong>代理</strong>，本身不具备特定职责，只是在内部例化了initiator和monitor，并将它们作为小队组织在一起，这么做是因为无论激励还是监测，在验证环境中都是必不可少的，且每一个接口都对应着一个initiator和monitor</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116211317271.png" srcset="/img/loading.gif" lazyload alt="image-20211116211317271"></p>
<p>成员变量都在new中得到初始化和例化</p>
<p>也具备set_interface函数</p>
<hr>
<p><strong>任务：</strong>set_interface</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116211721080.png" srcset="/img/loading.gif" lazyload alt="image-20211116211721080"></p>
<figure class="highlight crmsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs crmsh">除了自身获得虚接口，还会进一步传递给initiator和<span class="hljs-literal">monitor</span><br></code></pre></div></td></tr></table></figure>
<hr>
<p><strong>任务：</strong>run</p>
<p>并不承担其他职责而是负责唤醒initiator和monitor的run任务起到承上启下的作用</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116211908782.png" srcset="/img/loading.gif" lazyload alt="image-20211116211908782"></p>
<h2 id="5-2-顶层环境mdct-root-test"><a href="#5-2-顶层环境mdct-root-test" class="headerlink" title="5.2 顶层环境mdct_root_test"></a>5.2 顶层环境mdct_root_test</h2><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116212050647.png" srcset="/img/loading.gif" lazyload alt="image-20211116212050647"></p>
<h3 id="5-2-1-定义"><a href="#5-2-1-定义" class="headerlink" title="5.2.1 定义"></a>5.2.1 定义</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116212312316.png" srcset="/img/loading.gif" lazyload alt="image-20211116212312316"></p>
<p>成员对象包括：</p>
<ul>
<li>三个channel_generator(chnl_generator gen)</li>
<li>三个channle_agent(chnl_agent agent)</li>
<li>一个mcdt_monitor(mcdt_monitor mcdt_mon)</li>
<li>一个mcdt_check(mcdt_checker chker)</li>
</ul>
<p>成员变量：</p>
<ul>
<li>成员变量name</li>
<li>控制generator停止产生激励数据的<strong>事件</strong>generator_stop_event(gen_stop_e)</li>
</ul>
<figure class="highlight haxe"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs haxe"><span class="hljs-keyword">new</span><span class="hljs-type"></span>对所有组件进行例化，将所有组件数据通信关系进行连接<br></code></pre></div></td></tr></table></figure>
<h3 id="5-2-2-new（续）"><a href="#5-2-2-new（续）" class="headerlink" title="5.2.2 new（续）"></a>5.2.2 new（续）</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116212633341.png" srcset="/img/loading.gif" lazyload alt="image-20211116212633341"></p>
<p>在连接组件之前对组件先进行例化</p>
<p>参照组件之间的通信关系，完成mailbox句柄赋值</p>
<h3 id="5-2-3-gen-stop-callback-run-stop-callback"><a href="#5-2-3-gen-stop-callback-run-stop-callback" class="headerlink" title="5.2.3 gen_stop_callback , run_stop_callback"></a>5.2.3 gen_stop_callback , run_stop_callback</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116213437000.png" srcset="/img/loading.gif" lazyload alt="image-20211116213437000"></p>
<p>gen_stop_callback：</p>
<ul>
<li><p>mcdt_root_test是父类，没有对gen_stop_callback这个回调函数填充</p>
</li>
<li><p>如果成员变量，gen_stop_event被触发之后并且已经停止了，gen产生数据之后，还需要做什么额外的回调处理</p>
</li>
</ul>
<p>run_stop_callback：</p>
<ul>
<li>默认填充</li>
<li>等待三个generator在发送完所有激励数据后，且每个generator均交换了一把钥匙，可以从旗语run_stop_flags.get获得三把钥匙；接下来利用$finish结束仿真</li>
<li>mcdt_root_test是父类，没有对gen_stop_callback这个回调函数填充</li>
<li>run_stop_callback结合channel_generator发送完数据给旗语run_stop_flag交还钥匙的逻辑共同完成了对结束仿真的时序控制</li>
</ul>
<h3 id="5-2-4-run-顶层环境的运行任务"><a href="#5-2-4-run-顶层环境的运行任务" class="headerlink" title="5.2.4 run(顶层环境的运行任务)"></a>5.2.4 run(顶层环境的运行任务)</h3><p>起到调度整体环境组建的作用</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116224255876.png" srcset="/img/loading.gif" lazyload alt="image-20211116224255876"></p>
<figure class="highlight asciidoc"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs asciidoc">调用do<span class="hljs-emphasis">_config任务，该任务决定产生多少个什么样的随机数据事务</span><br><span class="hljs-emphasis">触发各个agent、mcdt_monitor、checker让他们各自开始执行</span><br><span class="hljs-emphasis">通识准备了等候gen_stop_</span>e的事件，并强行停止gen产生激励事物的线程<br></code></pre></div></td></tr></table></figure>
<p>使用并行线程<code>fork...join_none</code>语句，为的是启动程序而不阻碍各个程序执行</p>
<p>但本例没有用到这一特性</p>
<hr>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116225039863.png" srcset="/img/loading.gif" lazyload alt="image-20211116225039863"></p>
<p>除了generator以外都进入到run的运行任务，但他们并没有走多远，因为他们没有generator生成的trans</p>
<figure class="highlight lasso"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lasso">因此最后使用<span class="hljs-string">``</span>fork<span class="hljs-params">...</span><span class="hljs-keyword">join</span><span class="hljs-string">``</span>控制generator开始运行<br>并且产生和发送随机事务给initiator<br>结束后调用run_stop_callback()<br></code></pre></div></td></tr></table></figure>
<h3 id="5-2-5-set-interface"><a href="#5-2-5-set-interface" class="headerlink" title="5.2.5 set_interface"></a>5.2.5 set_interface</h3><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116225450808.png" srcset="/img/loading.gif" lazyload alt="image-20211116225450808"></p>
<p>set_interface：同channel_agent一致，主要做虚接口传递</p>
<p>do_config：</p>
<ul>
<li>空函数，在子类中填充</li>
<li>用于随机化控制产生多少个，什么样内容的随机数据transcation</li>
</ul>
<h2 id="5-3-父类实现结构图"><a href="#5-3-父类实现结构图" class="headerlink" title="5.3 父类实现结构图"></a>5.3 父类实现结构图</h2><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116225710606.png" srcset="/img/loading.gif" lazyload alt="目前实现结构图"></p>
<p>至此我们使用顶层盒子mcdt_root_test封装了这些组件</p>
<p>并通过.run运行任务</p>
<h2 id="5-4-do-config重定义"><a href="#5-4-do-config重定义" class="headerlink" title="5.4 do_config重定义"></a>5.4 do_config重定义</h2><p>在触发组件运行之前，需确定需要产生什么样的数据激励(重定义do_config函数)</p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116230019374.png" srcset="/img/loading.gif" lazyload alt="image-20211116230019374"></p>
<p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116230104837.png" srcset="/img/loading.gif" lazyload alt="image-20211116230104837"></p>
<p>通过对三个generator随机化，指定了各个chnl_gen需要产生的数据事务器(trans)的数量、数据之间和数据包之间的空闲周期、每个数据包的数据容量中</p>
<p>在随机化过程中，通过立即断言判断随机化是否成功。如果失败使用$fatal报告错误信息并停止仿真</p>
<h2 id="5-5-最后实现结构图"><a href="#5-5-最后实现结构图" class="headerlink" title="5.5 最后实现结构图"></a>5.5 最后实现结构图</h2><p><img src="https://markdownpic-1301418409.cos.ap-nanjing.myqcloud.com/img/markdown_1/image-20211116230119510.png" srcset="/img/loading.gif" lazyload alt="目前实现结构图"></p>
<p><strong>没有激励，整个环境无法运转</strong></p>
<p><strong>所有激励发送结束以后可以结束仿真</strong></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/IC/">IC</a>
                    
                      <a class="hover-with-bg" href="/categories/IC/sv%E5%AD%A6%E4%B9%A0/">sv学习</a>
                    
                      <a class="hover-with-bg" href="/categories/IC/sv%E5%AD%A6%E4%B9%A0/%E5%AE%9E%E9%AA%8C/">实验</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E5%AE%9E%E9%AA%8C/">实验</a>
                    
                      <a class="hover-with-bg" href="/tags/IC/">IC</a>
                    
                      <a class="hover-with-bg" href="/tags/sv%E5%AD%A6%E4%B9%A0/">sv学习</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/202111171106/IC/uvm%E5%AD%A6%E4%B9%A0essay/ic/sv%E5%AD%A6%E4%B9%A0/UVM%E5%85%A5%E9%97%A8%E5%92%8C%E8%BF%9B%E9%98%B61%EF%BC%9A%E9%AA%8C%E8%AF%81%E6%96%B9%E6%B3%95%E5%AD%A6%E6%A6%82%E8%BF%B0_%E7%B1%BB%E5%BA%93%E5%9C%B0%E5%9B%BE_%E5%B7%A5%E5%8E%82%E6%9C%BA%E5%88%B6_%E8%A6%86%E7%9B%96%E6%96%B9%E6%B3%95/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">UVM入门和进阶1：验证方法学概述_类库地图_工厂机制_覆盖方法</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/202111151136/IC/sv%E5%AD%A6%E4%B9%A0/%E5%AE%9E%E9%AA%8Cessay/ic/sv%E5%AD%A6%E4%B9%A0/SV%E5%AE%9E%E9%AA%8C%E4%B8%80/">
                        <span class="hidden-mobile">HelloWorld | SV实验0 | SV实验1</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                  
                
                
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'preferred-color-scheme';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'GreensCH/commitutterances');
      s.setAttribute('issue-term', 'title');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <span> | </span> <a href="https://weibo.com/u/7453939976" target="_blank" rel="nofollow noopener"> Green Weibo</a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    
      <script  src="/js/img-lazyload.js" ></script>
    
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        loader: {
          load: ['ui/lazy']
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" ></script>

  





  <script  src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js" ></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"default"});
    }
  </script>




  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?eca4a4d34dadf0d4e282cc6ef2dc3de6";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


<!-- hexo injector body_end start --><script src="/js/backgroundize.js"></script>
  <link defer rel="stylesheet" href="/css/backgroundize.css" />
  
  <div id="aplayer" style="width:300px"></div>
  <link defer rel="stylesheet" href="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.css" />
  <script src="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.js"></script>
  <script defer src="/js/aplayer.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"superSample":1,"position":"left","width":250,"height":500,"vOffset":-18},"mobile":{"show":false},"dialog":{"enable":false,"hitokoto":true,"width":10,"height":10,"vOffset":-100},"log":false});</script></body>
</html>
